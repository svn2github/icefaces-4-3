if(!window.mobi){window.mobi={};}mobi.timespinner={pattern:{},opened:{},centerCalculation:{},scrollEvent:{},init:function(a,f,i,k,j){var e=a+"_bg";if(!document.getElementById(e).className){document.getElementById(e).className="mobi-date-bg-inv";}var h=parseInt(k);var m=parseInt(i);var d=parseInt(f);if(j){this.pattern[a]=j;ice.log.debug(ice.log," pattern change not yet implemented ="+this.pattern);}this.opened[a]=false;var l=document.getElementById(a+"_hrInt");var c=document.getElementById(a+"_mInt");var b=document.getElementById(a+"_ampmInt");if(c){c.innerHTML=m;}if(l){l.innerHTML=d;}var g="AM";if(h>0){g="PM";}if(b){b.innerHTML=g;}this.updateTime(a);this.scrollEvent="ontouchstart" in window?"touchmove":"scroll";},mUp:function(a){var d=a+"_mInt";var c=document.getElementById(d);if(c){var b=this.getIntValue(d);if(b==59){c.innerHTML=0;}else{c.innerHTML=b+1;}}this.updateTime(a);},mDn:function(a){var d=a+"_mInt";var c=document.getElementById(d);if(c){var b=this.getIntValue(d);if(b==0){c.innerHTML=59;}else{c.innerHTML=b-1;}}this.updateTime(a);},hrUp:function(a){var b=a+"_hrInt";var d=document.getElementById(b);if(d){var c=this.getIntValue(b);if(c==12){d.innerHTML=1;}else{d.innerHTML=c+1;}}this.updateTime(a);},hrDn:function(a){var c=document.getElementById(a+"_hrInt");if(c){var b=this.getIntValue(a+"_hrInt");if(b==1){c.innerHTML=12;}else{c.innerHTML=b-1;}}this.updateTime(a);},ampmToggle:function(a){var c=a+"_ampmInt";var b=document.getElementById(c);if(b.innerHTML=="AM"){b.innerHTML="PM";}else{b.innerHTML="AM";}this.updateTime(a);},updateTime:function(a){var d=a+"_ampmInt";var c=document.getElementById(d);var b=this.getIntValue(a+"_mInt");var e=this.getIntValue(a+"_hrInt");this.writeTitle(a,e,b,c.innerHTML);},writeTitle:function(a,e,d,c){if(e<10){e="0"+e;}if(d<10){d="0"+d;}var f=e+":"+d+" "+c;var b=document.getElementById(a+"_title");b.childNodes[1].innerHTML=f;},getIntValue:function(c){var b=document.getElementById(c);if(b){var a=b.innerHTML;return parseInt(a);}else{return 1;}},select:function(b,c){this.cfg=c;var e=this.cfg.singleSubmit;var f=this.cfg.event;var h=false;var a=this.cfg.behaviors;if(a){h=true;}var g=document.getElementById(b+"_input");var d=document.getElementById(b+"_title");g.value=d.childNodes[1].innerHTML;if(h){if(a.change){a.change();}}if(!h&&e){ice.se(f,b);}this.close(b);},toggle:function(a){if(!this.opened[a]){this.open(a);}else{this.close(a);}},open:function(b){var c=b+"_bg";var a=b+"_popup";document.getElementById(c).className="mobi-time-bg";document.getElementById(a).className="mobi-time-container ui-widget ui-widget-content";this.centerCalculation[b]=function(){mobi.panelAutoCenter(a);};ice.mobi.addListener(window,this.scrollEvent,this.centerCalculation[b]);ice.mobi.addListener(window,"resize",this.centerCalculation[b]);this.opened[b]=true;mobi.panelAutoCenter(a);},close:function(a){var b=a+"_bg";if(window.removeEventListener){window.removeEventListener(this.scrollEvent,this.centerCalculation[a],false);window.removeEventListener("resize",this.centerCalculation[a],false);}else{window.detachEvent(this.scrollEvent,this.centerCalculation[a],false);window.detachEvent("resize",this.centerCalculation[a],false);}document.getElementById(b).className="mobi-time";document.getElementById(a+"_popup").className="mobi-time-container-inv ui-widget ui-widget-content";this.opened[a]=false;this.centerCalculation[a]=undefined;},unload:function(a){alert("unloading for clientId");this.pattern[a]=null;this.opened[a]=null;}};