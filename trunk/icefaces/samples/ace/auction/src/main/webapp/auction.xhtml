<!--
  ~ Copyright 2004-2014 ICEsoft Technologies Canada Corp.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the
  ~ License. You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an "AS
  ~ IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  ~ express or implied. See the License for the specific language
  ~ governing permissions and limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:ace="http://www.icefaces.org/icefaces/components"
                xmlns:icecore="http://www.icefaces.org/icefaces/core">
<h:head>
    <title>ICEfaces Auction Monitor</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <h:outputStylesheet library="css" name="demo_template.css"/>
    <h:outputStylesheet library="css" name="auction_styles.css"/>
    <link href="./resources/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
    <link href="./resources/images/favicon.ico" rel="icon" type="image/x-icon"/>
    
    <script type="text/javascript">
	    function focusBid() {
	    	var bidIn = document.getElementById('a:bidIn_input');
	    	if (bidIn) {
		    	bidIn.focus();
		    	bidIn.select();
	    	}
	    }
    </script>
</h:head>

<h:body>
	<!-- TOOD Maybe make notification bar via growl (needs a bugfix to hide properly) or a single line bar? -->
	<!-- TODO Make ChatRobot? Would also have a TestFlag option -->
	<!-- TODO Possibly add images to Global notification messages (like a bell for won, arrow up for bid, etc.), and perhaps use an object instead of a String so that timestamp, image, text can be separated? -->
	<!-- TODO Add auction item images (perhaps shown on the right of the details panel), and choosable images when adding an item -->
    <!-- TODO Make a mobile version of the auction list using mobi components -->
    <!-- TODO Add commenting throughout the source to help new developers -->
    <!-- TODO Generate serialization IDs to remove source warnings -->
    <!-- TODO Bug check ace:notificationPanel not firing Effect when server side instead of client side -->
    <!-- TODO Bug check ace:dialog position, which doesn't seem to apply properly -->
    <!-- TODO ICE-10621 - When fixed and ace:simpleSelectOneMenu functions the same as h:selectOneMenu then update all h:selectOneMenus to ACE (on settings, add item, etc.) -->
    
    <h:outputText value="#{pushBean.init}" styleClass="hidden"/>
    <h:outputText value="#{bidRobot.init}" styleClass="hidden"/>
    
    <f:event type="preRenderView" listener="#{settingsController.initializeTheme}"/>
    <ace:themeSelect value="#{settingsBean.themeName}" styleClass="hidden"
                     rendered="#{!settingsBean.hasSetTheme}"/>
    
    <h:graphicImage library="images" name="banner_hdr_auction.jpg"/>
    
    <div class="auctionMonitorContainer">
        <ace:tabSet id="at" selectedIndex="#{tabBean.selectedIndex}"
                    orientation="#{settingsBean.tabOrientation}"
                    cancelOnInvalid="false" immediate="true"
                    tabChangeListener="#{tabController.changeListener}">
            <ace:tabPane id="Tb" label="Auction List">
		        <h:form id="f" prependId="false">
		            <ace:tabSetProxy for="at"/>
		            
		            <ui:include src="/WEB-INF/includes/list-tab.xhtml"/>
		        </h:form>
	        </ace:tabPane>
	        <ace:tabPane id="Tal" label="Auction Logs">
	            <h:form id="al" prependId="false">
		            <ace:tabSetProxy for="at"/>
		            
		            <ui:include src="/WEB-INF/includes/logs-tab.xhtml"/>
                </h:form>
	        </ace:tabPane>
            <ace:tabPane id="Tp" label="Add Auction">
                <h:form id="p">
                    <ace:tabSetProxy for="at"/>
                    
                    <ui:include src="/WEB-INF/includes/post-tab.xhtml"/>
                </h:form>
            </ace:tabPane>
            <ace:tabPane id="Tc" label="Chat" disabled="#{!chatBean.isPositionTab}">
                <h:form id="c">
                    <ace:tabSetProxy for="at"/>
                    
                    <ui:include src="/WEB-INF/includes/chat-tab.xhtml"/>
                </h:form>
            </ace:tabPane>
            <ace:tabPane id="Ts" label="Settings">
                <h:form id="s">
                    <ace:tabSetProxy for="at"/>
                    
                    <ui:include src="/WEB-INF/includes/settings-tab.xhtml"/>
                </h:form>
            </ace:tabPane>
            <ace:tabPane id="Tab" label="About">
                <h:form id="ab">
                    <ace:tabSetProxy for="at"/>
                    
                    <ui:include src="/WEB-INF/includes/about-tab.xhtml"/>
                </h:form>
            </ace:tabPane>
        </ace:tabSet>
        
        <h3><h:messages globalOnly="true" layout="table"/></h3>
    </div>
    
    <ui:include src="/WEB-INF/includes/popups.xhtml"/>

</h:body>
</html>
